<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ArtConnect - Premium Digital Marketplace</title>
    <meta
      name="description"
      content="Create, discover and trade NFT artworks with cryptocurrency payments via MetaMask"
    />
    <link rel="stylesheet" href="styles.css" />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
  </head>

  <body>
    <!-- Header -->
    <header class="header">
      <div class="container">
        <div class="nav-brand">
          <h1>ArtConnect</h1>
        </div>
        <nav class="nav-menu">
          <a href="#gallery" class="nav-link active">Gallery</a>
          <a href="#profiles" class="nav-link">Artists</a>
          <a href="#submit" class="nav-link">Submit Artwork</a>
          <a href="#about" class="nav-link">About</a>
          <a href="#admin" class="nav-link admin-only" style="display: none"
            >Admin</a
          >
          <a href="#profile" class="nav-link">Profile</a>
        </nav>
        <div class="nav-actions">
          <button class="cart-btn" onclick="toggleCart()">
            <i class="fas fa-shopping-basket"></i>
            <span class="cart-count" id="cartCount">0</span>
          </button>
          <button class="wallet-btn" id="walletBtn" onclick="connectWallet()">
            <i class="fab fa-ethereum"></i>
            Connect Ethereum Wallet
          </button>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Gallery Section -->
      <section id="gallery" class="section active">
        <div class="container">
          <div class="section-header">
            <h2>ArtWork Marketplace</h2>
            <p>Discover, collect and trade unique digital artworks</p>
          </div>

          <div class="filters">
            <div class="search-box">
              <i class="fas fa-search"></i>
              <input
                type="text"
                id="searchInput"
                placeholder="Search paintings, artists..."
                onkeyup="filterArtworks()"
              />
            </div>
            <select id="categoryFilter" onchange="filterArtworks()">
              <option value="all">All Categories</option>
              <option value="Abstract">Abstract</option>
              <option value="Landscape">Landscape</option>
              <option value="Portrait">Portrait</option>
              <option value="Still Life">Still Life</option>
              <option value="Urban">Urban</option>
              <option value="Seascape">Seascape</option>
            </select>
            <select id="sortFilter" onchange="filterArtworks()">
              <option value="title">Sort by Title</option>
              <option value="price-low">Price: Low to High</option>
              <option value="price-high">Price: High to Low</option>
              <option value="artist">Artist Name</option>
              <option value="year">Newest First</option>
            </select>
          </div>

          <div class="artwork-grid" id="artworkGrid"></div>
        </div>
      </section>

      <!-- Artist Profiles Section -->
      <section id="profiles" class="section">
        <div class="container">
          <div class="section-header">
            <h2><i class="fas fa-users"></i> Featured Artists</h2>
            <p>
              Discover talented artists and explore their unique portfolios
            </p>
          </div>
          <div class="artists-grid" id="artistsGrid"></div>
        </div>
      </section>

      <!-- Submit Artwork Section -->
      <section id="submit" class="section">
        <div class="container">
          <div class="section-header">
            <h2><i class="fas fa-palette"></i> Submit Your Artwork</h2>
            <p>
              Share your digital art with the world and start earning from your
              creativity
            </p>
          </div>

          <div class="submit-form-container">
            <div class="wallet-warning" id="walletWarning">
              <p>
                <i class="fas fa-exclamation-triangle"></i> Please connect your
                Ethereum wallet via MetaMask to submit artwork
              </p>
            </div>

            <form
              class="submit-form"
              id="submitForm"
              onsubmit="submitArtwork(event)"
            >
              <div class="form-row">
                <div class="form-group">
                  <label for="artworkTitle">Artwork Title *</label>
                  <input type="text" id="artworkTitle" required />
                </div>
                <div class="form-group">
                  <label for="artistName">Artist Name *</label>
                  <input type="text" id="artistName" readonly />
                  <small>(Automatically filled from your profile)</small>
                </div>
              </div>

              <div class="form-group">
                <label for="artworkDescription">Description *</label>
                <textarea
                  id="artworkDescription"
                  rows="4"
                  required
                  placeholder="Describe your artwork, inspiration, techniques used..."
                ></textarea>
              </div>

              <div class="form-group">
                <label for="artworkImage">Upload Artwork</label>
                <input type="file" id="artworkImage" accept="image/*" required />
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="artworkPrice">Price (ETH) *</label>
                  <input
                    type="number"
                    id="artworkPrice"
                    step="0.001"
                    min="0.001"
                    required
                  />
                </div>
                <div class="form-group">
                  <label for="artworkCategory">Category *</label>
                  <select id="artworkCategory" required>
                    <option value="">Select category</option>
                    <option value="Abstract">Abstract</option>
                    <option value="Landscape">Landscape</option>
                    <option value="Portrait">Portrait</option>
                    <option value="Still Life">Still Life</option>
                    <option value="Urban">Urban</option>
                    <option value="Seascape">Seascape</option>
                    <option value="Digital Art">Digital Art</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="artworkYear">Year Created *</label>
                  <input
                    type="number"
                    id="artworkYear"
                    min="1800"
                    max="2024"
                    required
                  />
                </div>
              </div>

              <div class="form-group">
                <label for="artworkDimensions">Dimensions *</label>
                <input
                  type="text"
                  id="artworkDimensions"
                  required
                  placeholder='e.g., 24" x 36" or 1920x1080px'
                />
              </div>

              <div class="submission-guidelines">
                <h3>Submission Guidelines:</h3>
                <ul>
                  <li>• Ensure you own the rights to the artwork</li>
                  <li>• Use high-quality images (minimum 1200px width)</li>
                  <li>• Provide accurate descriptions and details</li>
                  <li>
                    • Price fairly based on your experience and artwork quality
                  </li>
                  <li>• All submissions are subject to review</li>
                </ul>
              </div>

              <div class="form-actions">
                <button
                  type="button"
                  class="btn-secondary"
                  onclick="showSection('gallery')"
                >
                  Cancel
                </button>
                <button type="submit" class="btn-primary" id="submitBtn">
                  Submit Artwork
                </button>
              </div>
            </form>
          </div>
        </div>
      </section>

      <!-- About Section -->
      <section id="about" class="section">
        <div class="container">
          <div class="section-header">
            <h2>About ArtConnect</h2>
            <p>
              ArtConnect is a digital art marketplace built for the new creative
              era. We connect artists and collectors through the power of
              cryptocurrency — making art buying fast, secure, and borderless.
              No middlemen, no barriers — just pure connection between
              creativity and appreciation.
            </p>
          </div>

          <div class="features-grid">
            <div class="feature-card">
              <i class="fas fa-palette"></i>
              <h3>Curated Collections</h3>
              <p>
                Discover handpicked artworks from passionate creators around the
                world. Every piece tells a story, every artist brings a unique
                perspective. Whether you’re into bold digital paintings or
                minimalist designs, there’s something here made just for you.
              </p>
            </div>

            <div class="feature-card">
              <i class="fas fa-shield-alt"></i>
              <h3>Secure Crypto Payments</h3>
              <p>
                All transactions on ArtConnect are powered by MetaMask, giving
                you safe and transparent payments directly through
                cryptocurrency. Artists get paid instantly — and buyers know
                exactly where their money goes.
              </p>
            </div>

            <div class="feature-card">
              <i class="fas fa-bolt"></i>
              <h3>Instant Ownership</h3>
              <p>
                The moment your payment goes through, the artwork is yours. No
                waiting, no middle steps — just instant access to the art you
                love.
              </p>
            </div>

            <div class="feature-card">
              <i class="fas fa-globe"></i>
              <h3>Global Community</h3>
              <p>
                ArtConnect breaks down borders. We’re building a creative space
                where artists and collectors from every corner of the world can
                meet, collaborate, and grow together through art and technology.
              </p>
            </div>
          </div>

          <div class="mission-section">
            <h3>Our Mission</h3>
            <p>
              To empower digital artists and celebrate creativity in every form.
              We believe art deserves to be accessible, secure, and rewarding —
              for the people who create it and the ones who love it.
            </p>
          </div>
        </div>
      </section>

      <!-- Admin Panel -->
      <section id="admin" class="section admin-only" style="display: none">
        <div class="container">
          <div class="section-header">
            <h2><i class="fas fa-cog"></i> Admin Dashboard</h2>
            <p>
              Manage platform operations and oversee marketplace activities
            </p>
          </div>

          <div class="admin-dashboard">
            <div class="admin-stats">
              <div class="stat-card">
                <i class="fas fa-palette"></i>
                <div class="stat-info">
                  <h3 id="totalArtworks">0</h3>
                  <p>Total Artworks</p>
                </div>
              </div>
              <div class="stat-card">
                <i class="fas fa-users"></i>
                <div class="stat-info">
                  <h3 id="totalArtists">0</h3>
                  <p>Active Artists</p>
                </div>
              </div>
              <div class="stat-card">
                <i class="fab fa-ethereum"></i>
                <div class="stat-info">
                  <h3 id="totalVolume">0</h3>
                  <p>ETH Volume</p>
                </div>
              </div>
              <div class="stat-card">
                <i class="fas fa-chart-line"></i>
                <div class="stat-info">
                  <h3 id="totalTransactions">0</h3>
                  <p>Transactions</p>
                </div>
              </div>
            </div>

            <div class="admin-controls">
              <div class="admin-section">
                <h3>Artwork Management</h3>
                <div class="admin-actions">
                  <button class="btn btn-primary" onclick="approveAllArtworks()">
                    <i class="fas fa-check"></i> Approve All Pending
                  </button>
                  <button class="btn btn-secondary" onclick="viewReports()">
                    <i class="fas fa-flag"></i> View Reports
                  </button>
                  <button class="btn btn-secondary" onclick="exportData()">
                    <i class="fas fa-download"></i> Export Data
                  </button>
                </div>
              </div>

              <div class="admin-section">
                <h3>User Management</h3>
                <div class="admin-actions">
                  <button class="btn btn-primary" onclick="viewAllUsers()">
                    <i class="fas fa-users"></i> Manage Users
                  </button>
                  <button class="btn btn-secondary" onclick="viewTransactions()">
                    <i class="fas fa-receipt"></i> Transaction History
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Profile Section -->
      <section id="profile" class="section">
        <div class="container">
          <div class="section-header">
            <h2><i class="fas fa-user-circle"></i> My Profile</h2>
            <p>Manage your account, view your artworks, and track purchases</p>
          </div>

          <div class="profile-card">
            <h3>
              <span id="profileName">Guest User</span>
              <button
                id="editNameBtn"
                class="btn-secondary"
                onclick="enableUsernameEdit()"
              >
                Edit
              </button>
            </h3>

            <div id="usernameEdit" style="display: none">
              <input
                type="text"
                id="usernameInput"
                placeholder="Enter new username"
              />
              <button class="btn-primary" onclick="saveUsername()">Save</button>
            </div>

            <div class="bio-section">
              <h3>Bio</h3>
              <p id="profileBio">No bio yet.</p>
              <button
                id="editBioBtn"
                class="btn-secondary"
                onclick="enableBioEdit()"
              >
                Edit
              </button>

              <div id="bioEdit" style="display: none">
                <textarea
                  id="bioInput"
                  rows="3"
                  placeholder="Write something about yourself..."
                ></textarea>
                <button class="btn-primary" onclick="saveBio()">Save</button>
              </div>
            </div>

            <p id="profileWallet">Wallet: Not Connected</p>
          </div>

          <div class="profile-details">
            <h3>My Submissions</h3>
            <div id="userArtworks" class="artwork-grid"></div>

            <h3>My Purchases</h3>
            <div id="userPurchases" class="artwork-grid"></div>
          </div>
        </div>
      </section>
    </main>

    <!-- Modals -->
    <div id="resellModal" class="modal">
      <div class="modal-content">
        <h2>Resell Your Artwork</h2>
        <p id="resellArtTitle" class="modal-subtitle"></p>
        <label for="resellPrice">Price (tETH) *</label>
        <input
          type="number"
          id="resellPrice"
          step="0.001"
          min="0.001"
          required
        />
        <div class="modal-actions">
          <button class="btn-primary" onclick="confirmResell()">Confirm</button>
          <button class="btn-secondary" onclick="closeResellModal()">
            Cancel
          </button>
        </div>
      </div>
    </div>

    <div class="cart-modal" id="cartModal">
      <div class="cart-content">
        <div class="cart-header">
          <h3>Marketplace Basket</h3>
          <button class="close-btn" onclick="toggleCart()">&times;</button>
        </div>
        <div class="cart-items" id="cartItems"></div>
        <div class="cart-footer">
          <div class="cart-total">
            <strong>Total: <span id="cartTotal">0.000</span> ETH</strong>
          </div>
          <div class="cart-actions">
            <button
              class="btn-secondary cart-btn"
              id="clearCartBtn"
              onclick="clearCart()"
            >
              Clear Cart
            </button>
            <button
              class="btn-primary cart-btn"
              id="checkoutBtn"
              onclick="checkout()"
            >
              Checkout
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="artwork-modal" id="artworkModal">
      <div class="artwork-content">
        <button class="close-btn" onclick="closeArtworkModal()">&times;</button>
        <div class="artwork-detail" id="artworkDetail"></div>
      </div>
    </div>

    <div id="artDetailsModal" class="modal">
      <div class="modal-content" id="artDetailsContent">
        <button class="modal-close" onclick="closeDetailsModal()">
          <i class="fas fa-times"></i>
        </button>
        <img
          id="detailsImage"
          src=""
          alt="Artwork Preview"
          class="details-image"
        />
        <div class="details-info">
          <h2 id="detailsTitle"></h2>
          <p><strong>Artist:</strong> <span id="detailsArtist"></span></p>
          <p><strong>Category:</strong> <span id="detailsCategory"></span></p>
          <p><strong>Year:</strong> <span id="detailsYear"></span></p>
          <p><strong>Dimensions:</strong> <span id="detailsDimensions"></span></p>
          <p><strong>Description:</strong></p>
          <p id="detailsDescription"></p>
          <p class="details-price">
            <strong>Price:</strong> <span id="detailsPrice"></span> ETH
          </p>
          <div class="modal-actions">
            <button class="btn-secondary" onclick="closeDetailsModal()">
              Close
            </button>
            <button
              class="btn-primary"
              id="detailsBuyBtn"
              onclick="buyArtworkFromModal()"
            >
              Buy Artwork
            </button>
          </div>
        </div>
      </div>
    </div>

    <footer class="footer">
      <div class="container">
        <p>
          &copy; 2025 ArtConnect — Empowering Artists Through Blockchain
          Creativity.
        </p>
      </div>
    </footer>

    <!-- Firebase Initialization and App Logic -->
    <script type="module">
      import {
        initializeApp,
      } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
      import {
        getFirestore,
        collection,
        addDoc,
        getDocs,
        deleteDoc,
        doc,
        updateDoc,
      } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

      const firebaseConfig = {
        apiKey: "AIzaSyDtvLb1RHpXDY5yKMIYkxlZKzKFiNbhmy4",
        authDomain: "artconnect-9d99a.firebaseapp.com",
        projectId: "artconnect-9d99a",
        storageBucket: "artconnect-9d99a.appspot.com",
        messagingSenderId: "123391938297",
        appId: "1:123391938297:web:8573f94b2fdf283305ef95",
      };

      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

      window.db = db;
      window.addDoc = addDoc;
      window.getDocs = getDocs;
      window.deleteDoc = deleteDoc;
      window.doc = doc;
      window.updateDoc = updateDoc;
      window.collection = collection;
    </script>

    <script src="scripts.js"></script>
  </body>
</html>
